# Auto-Spray ‚Äî –£–º–Ω—ã–π –æ—Å–≤–µ–∂–∏—Ç–µ–ª—å –≤–æ–∑–¥—É—Ö–∞ –¥–ª—è —Ç—É–∞–ª–µ—Ç–∞ —Å –≥–ª—É–±–æ–∫–∏–º —Å–Ω–æ–º –∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ–º –ø–æ —Å–≤–µ—Ç—É

**–≠–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—ã–ª—è–µ—Ç –∞—Ä–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä –≤ —Ç—É–∞–ª–µ—Ç–µ ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω—É–∂–Ω–æ.**
–°–ø—è—â–∏–π —Ä–µ–∂–∏–º –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç **–º–µ–Ω–µ–µ 0.1 –º–∫–ê** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞ 18650 **–¥–æ 1 –≥–æ–¥–∞** –±–µ–∑ –ø–æ–¥–∑–∞—Ä—è–¥–∫–∏.

---

## üí° –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º**:
  ‚Üí –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Å–≤–µ—Ç–∞ –≤ —Ç—É–∞–ª–µ—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –æ—Ç—Å—á—ë—Ç **3 –º–∏–Ω—É—Ç**.
  ‚Üí –ö–∞–∫ —Ç–æ–ª—å–∫–æ —Å–≤–µ—Ç **–≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è**, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–æ–¥–∏–Ω –∏–ª–∏ –¥–≤–∞ –∏–º–ø—É–ª—å—Å–∞ —Ä–∞—Å–ø—ã–ª–µ–Ω–∏—è** (–Ω–∞ 4 –º—Å –∫–∞–∂–¥—ã–π).
  ‚Üí –ü–æ—Å–ª–µ —Ä–∞—Å–ø—ã–ª–µ–Ω–∏—è ‚Äî **–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 15 –º–∏–Ω—É—Ç** (—á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥–æ–≤–∞—Ç—å –∞—Ä–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä).

- **–†—É—á–Ω–æ–π —Ä–µ–∂–∏–º**:
  ‚Üí –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ‚Äî —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ä–∞—Å–ø—ã–ª–∏—Ç –∞—Ä–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.

- **–†–µ–∂–∏–º ¬´–ø–æ —Ç–∞–π–º–µ—Ä—É¬ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**:
  ‚Üí –ï—Å–ª–∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `#define SPRAY_ON_TIMER_ONLY` ‚Äî —Ä–∞—Å–ø—ã–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **—Å—Ä–∞–∑—É –ø–æ—Å–ª–µ 3 –º–∏–Ω—É—Ç —Å–≤–µ—Ç–∞**, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è.

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è —ç–Ω–µ—Ä–≥–∏–∏**:
  ‚Üí –ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä **—Å–ø–∏—Ç –≤ `SLEEP_MODE_PWR_DOWN`**, –ø–æ–∫–∞ —Å–≤–µ—Ç –≤—ã–∫–ª—é—á–µ–Ω –∏ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.
  ‚Üí –ü—Ä–æ–±—É–∂–¥–∞–µ—Ç—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –ø–æ:
  - –ù–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏ (D2),
  - –ò–∑–º–µ–Ω–µ–Ω–∏—é –æ—Å–≤–µ—â—ë–Ω–Ω–æ—Å—Ç–∏ (—Ü–∏—Ñ—Ä–æ–≤–æ–π –≤—ã—Ö–æ–¥ —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ –Ω–∞ D3).
    ‚Üí –ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Å–≤–µ—Ç–µ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ**.

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                                    | –ü–∏–Ω Pro Micro |
| -------------------------------------------- | ------------- |
| –ö–Ω–æ–ø–∫–∞ (GND –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏)                     | **D2**        |
| –¶–∏—Ñ—Ä–æ–≤–æ–π –≤—ã—Ö–æ–¥ —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ (HIGH = —Å–≤–µ—Ç–ª–æ) | **D3**        |
| –ú–æ—Ç–æ—Ä —Ä–∞—Å–ø—ã–ª–∏—Ç–µ–ª—è                            | **D4**        |
| –ö—Ä–∞—Å–Ω—ã–π LED (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)                     | **D5**        |
| –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ (LOW = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)  | **D6**        |
| –ó–µ–ª—ë–Ω—ã–π LED (—Ä–∞–±–æ—Ç–∞)                         | **D7**        |
| –°–∏–Ω–∏–π LED (–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å)                       | **D8**        |
| –ü—å–µ–∑–æ–∏–∑–ª—É—á–∞—Ç–µ–ª—å                              | **D9**        |

> ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **Arduino Pro Micro** (ATmega32U4) –∏ **—Ü–∏—Ñ—Ä–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, KY-018).
> ‚ùå –ù–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –ø–∏—Ç–∞–Ω–∏—è ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –±–∞—Ç–∞—Ä–µ–µ–∫ 3‚Äì5 –í.

---

### üìè –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                    | –ó–Ω–∞—á–µ–Ω–∏–µ        | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                            |
| ---------------------------- | --------------- | --------------------------------------------------------------------------------------------------- |
| `PIN_BUTTON`                 | `2`             | –ü–∏–Ω, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ (GND –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏)                                                 |
| `PIN_LIGHT_DIGITAL`          | `3`             | –ü–∏–Ω, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–¥–∫–ª—é—á—ë–Ω —Ü–∏—Ñ—Ä–æ–≤–æ–π –≤—ã—Ö–æ–¥ —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ (HIGH = —Å–≤–µ—Ç–ª–æ)                              |
| `PIN_MOTOR`                  | `4`             | –ü–∏–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ—Ç–æ—Ä–æ–º —Ä–∞—Å–ø—ã–ª–∏—Ç–µ–ª—è                                                                  |
| `PIN_LED_BLOCK`              | `5`             | –ü–∏–Ω –∫—Ä–∞—Å–Ω–æ–≥–æ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ (–∏–Ω–¥–∏–∫–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)                                                      |
| `PIN_AUTO_MODE_SWITCH`       | `6`             | –ü–∏–Ω –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —Ä–µ–∂–∏–º–∞ (LOW = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á—ë–Ω)                                       |
| `PIN_LED_WORK`               | `7`             | –ü–∏–Ω –∑–µ–ª—ë–Ω–æ–≥–æ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ (–∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã)                                                          |
| `PIN_LED_READY`              | `8`             | –ü–∏–Ω —Å–∏–Ω–µ–≥–æ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ (–∏–Ω–¥–∏–∫–∞—Ü–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)                                                        |
| `PIN_BUZZER`                 | `9`             | –ü–∏–Ω –ø—å–µ–∑–æ–∏–∑–ª—É—á–∞—Ç–µ–ª—è                                                                                 |
| `SPRAY_ON_TIMER_ONLY`        | (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)   | –ï—Å–ª–∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ ‚Äî –ø—à–∏–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ä–∞–∑—É –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–≤–µ—Ç–∞ (–±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è) |
| `BLOCK_DURATION_SEC`         | `(30UL * 60UL)` | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å–ª–µ —Ä–∞—Å–ø—ã–ª–µ–Ω–∏—è (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)                                               |
| `AUTO_READY_DELAY_SEC`       | `(3UL * 60UL)`  | –í—Ä–µ–º—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ —Å–≤–µ—Ç–∞, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è ¬´–≥–æ—Ç–æ–≤–æ¬ª (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)                |
| `SPRAY_PULSE_COUNT`          | `2`             | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–º–ø—É–ª—å—Å–æ–≤ —Ä–∞—Å–ø—ã–ª–µ–Ω–∏—è –∑–∞ –æ–¥–∏–Ω –ø—à–∏–∫                                                        |
| `SPRAY_PULSE_DURATION_MS`    | `4`             | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –∏–º–ø—É–ª—å—Å–∞ –º–æ—Ç–æ—Ä–∞ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)                                               |
| `SPRAY_INTER_PULSE_DELAY_MS` | `10`            | –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∏–º–ø—É–ª—å—Å–∞–º–∏ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)                                                            |
| `BUZZER_ON_DURATION_MS`      | `300`           | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤—É–∫–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)                                     |
| `LED_BLINK_INTERVAL_MS`      | `1000`          | –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–∏–≥–∞–Ω–∏—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)                                                      |

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `Bounce2`.
2. –û—Ç–∫—Ä–æ–π—Ç–µ `Auto-Spray.ino` –≤ Arduino IDE.
3. **–î–ª—è —Ä–µ–∂–∏–º–∞ ¬´–ø–æ —Ç–∞–π–º–µ—Ä—É¬ª** ‚Äî —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ:

   ```cpp
   #define SPRAY_ON_TIMER_ONLY
   ```

---

### ‚úÖ –ß—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è –Ω–∞ GitHub:

> –ï—Å–ª–∏ –≤–∞—à –¥–∞—Ç—á–∏–∫ —Å–≤–µ—Ç–∞ –≤—ã–¥–∞—ë—Ç **LOW –ø—Ä–∏ —Å–≤–µ—Ç–µ** ‚Äî –∑–∞–º–µ–Ω–∏—Ç–µ –≤ –∫–æ–¥–µ:
>
> ```cpp
> bool isLightOn = (digitalRead(PIN_LIGHT_DIGITAL) == HIGH);
> ```
>
> –Ω–∞:
>
> ```cpp
> bool isLightOn = (digitalRead(PIN_LIGHT_DIGITAL) == LOW);
> ```

---

## üìå –ü–æ—á–µ–º—É —ç—Ç–æ –ª—É—á—à–µ –æ–±—ã—á–Ω—ã—Ö –æ—Å–≤–µ–∂–∏—Ç–µ–ª–µ–π?

| –û–±—ã—á–Ω—ã–π –æ—Å–≤–µ–∂–∏—Ç–µ–ª—å               | Auto-Spray                                  |
| -------------------------------- | ------------------------------------------- |
| –†–∞—Å–ø—ã–ª—è–µ—Ç –∫–∞–∂–¥—ã–µ 15‚Äì30 –º–∏–Ω—É—Ç     | –†–∞—Å–ø—ã–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞** |
| –ü–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥ –∞—Ä–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä–∞         | –≠–∫–æ–Ω–æ–º–∏—è –¥–æ 95%                             |
| –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –±–∞—Ç–∞—Ä–µ–µ–∫ 1-3 –º–µ—Å—è—Ü–µ–≤ | –†–∞–±–æ—Ç–∞–µ—Ç **2‚Äì5 –ª–µ—Ç**                        |
| –ù–µ –∑–Ω–∞–µ—Ç, –∫—Ç–æ –±—ã–ª –≤ —Ç—É–∞–ª–µ—Ç–µ      | –†–∞—Å–ø—ã–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ —É—à—ë–ª**     |

---

## üõ†Ô∏è –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

- –ü—Ä–æ–µ–∫—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ **ATmega32U4 (Pro Micro)**.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–≤–Ω–µ—à–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è** –∏ **Watchdog Timer**.
- –ù–µ—Ç `millis()` –≤ —Å–Ω–µ ‚Äî —Ç–æ–ª—å–∫–æ `WDT` –∏ `INT0/INT1`.
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–æ–¥ ‚Äî –º–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –¥—Ä—É–≥–∏–µ –ø–ª–∞—Ç—ã.
