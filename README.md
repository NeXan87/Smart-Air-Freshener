# Smart Air Freshener - —É–º–Ω—ã–π –æ—Å–≤–µ–∂–∏—Ç–µ–ª—å –≤–æ–∑–¥—É—Ö–∞ —Å –≥–ª—É–±–æ–∫–∏–º —Å–Ω–æ–º, –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ–º –ø–æ —Å–≤–µ—Ç—É –∏ –∫–Ω–æ–ø–∫–µ

"–ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ" –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ –æ—Å–≤–µ–∂–∏—Ç–µ–ª—è –≤–æ–∑–¥—É—Ö–∞ AirWick –≤ —É–º–Ω—ã–π –Ω–∞ Arduino Pro Mini —Å —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ–º –∏ –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –∏ —Ä—É—á–Ω–æ–º:

- –í –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ, –µ—Å–ª–∏ —Å–≤–µ—Ç –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ –≤–∫–ª—é—á—ë–Ω –Ω–µ –º–µ–Ω–µ–µ –¥–≤—É—Ö –º–∏–Ω—É—Ç, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏. –ö–∞–∫ —Ç–æ–ª—å–∫–æ —Å–≤–µ—Ç –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è (–ª–∏–±–æ —Å—Ä–∞–∑—É, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è), –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—à–∏–∫.
- –í —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ –ø—à–∏–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—Å–≤–µ—â–µ–Ω–∏—è. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—à–∏–∫–æ–≤ (–æ—Ç –æ–¥–Ω–æ–≥–æ –¥–æ —Ç—Ä—ë—Ö) –∏ –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –∑–∞–¥–∞—é—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è–º–∏.

–ü—Ä–∏ —Å–Ω–∏–∂–µ–Ω–∏–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –±–∞—Ç–∞—Ä–µ–∏ –¥–æ 3.4 –í –∏–ª–∏ –Ω–∏–∂–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –º–∏–≥–∞—é—â–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–∞–∑—Ä—è–¥–∞. –ö–æ–≥–¥–∞ —Å–≤–µ—Ç –≤—ã–∫–ª—é—á–µ–Ω –∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —É—Ö–æ–¥–∏—Ç –≤ –≥–ª—É–±–æ–∫–∏–π —Å–æ–Ω —Å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º –º–µ–Ω–µ–µ 1 –º–∫–ê.
–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—à–∏–∫–∞ –º–æ—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π —Ä–µ–≤–µ—Ä—Å, —á—Ç–æ–±—ã –Ω–∞–¥—ë–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∫–∞—Ä–µ—Ç–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –∏–∑–±–µ–∂–∞—Ç—å –∑–∞–ª–∏–ø–∞–Ω–∏—è.
–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–∏—Ñ—Ä–æ–≤–æ–π –¥–∞—Ç—á–∏–∫ OPT3001, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–µ–ª–∏—Ç–µ–ª—å —Å —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–º –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –±–æ–ª—å—à–æ–π —Ç–æ–∫ ‚Äî –æ–∫–æ–ª–æ 60–º–ê.

## üìê –°—Ö–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –û–±—â–∞—è —Å—Ö–µ–º–∞

![–ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —É–º–Ω–æ–≥–æ –æ—Å–≤–µ–∂–∏—Ç–µ–ª—è –≤–æ–∑–¥—É—Ö–∞ –Ω–∞ Arduino Pro Mini](https://github.com/NeXan87/Smart-Air-Freshener/blob/refactor/Electric%20Diagram/Smart-Air-Freshener.png?raw=true)

### –î—Ä–∞–π–≤–µ—Ä –¥–≤–∏–≥–∞—Ç–µ–ª—è MX1508

![–°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è MX1508](https://github.com/NeXan87/Smart-Air-Freshener/blob/refactor/Electric%20Diagram/mx1508.png?raw=true)

### DC-DC –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å

![–°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è DC-DC –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è](https://github.com/NeXan87/Smart-Air-Freshener/blob/refactor/Electric%20Diagram/DC-DC_converter.jpg?raw=true)

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—à–∏–∫** —á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞ –∏–ª–∏ —Å—Ä–∞–∑—É
- **–†—É—á–Ω–æ–π –ø—à–∏–∫** –ø–æ –∫–Ω–æ–ø–∫–µ ‚Äî –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å–ª–µ –ø—à–∏–∫–∞
- **1/2/3 –ø—à–∏–∫–∞** ‚Äî –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ, –≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
- **–†–µ–∂–∏–º "—Ç–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–π"** ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å–≤–µ—Ç
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 15 –º–∏–Ω** –ø–æ—Å–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—à–∏–∫–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–°–±—Ä–æ—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** ‚Äî —É–¥–µ—Ä–∂–∞–Ω–∏–µ–º –∫–Ω–æ–ø–∫–∏ 2+ —Å–µ–∫
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –±–∞—Ç–∞—Ä–µ–∏** (Li-ion 4.2 –í): –º–∏–≥–∞–µ—Ç –¥–æ–ø. —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –ø—Ä–∏ ‚â§3.4 –í
- **–ü–æ–ª–Ω—ã–π —Å–æ–Ω** (1 –º–ê) –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º —Å–≤–µ—Ç–µ –∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–∫–æ—è
- **–ú–æ—Ç–æ—Ä —Å —Ä–µ–≤–µ—Ä—Å–æ–º** ‚Äî –Ω–∞–¥—ë–∂–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **OPT3001** –∏–ª–∏ **–∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–∞**

---

## üîå –ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞

- **–ú–ö**: Arduino Pro Mini 3.3V / 8 –ú–ì—Ü (ATmega328P)
- **–ü–∏—Ç–∞–Ω–∏–µ**: Li-ion 4.2–í (–¥–∞–ª–µ–µ DC –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ 3.0–í)
- **–ú–æ—Ç–æ—Ä**: —Ä–æ–¥–Ω–æ–π DC-–º–æ—Ç–æ—Ä —á–µ—Ä–µ–∑ MX1508
- **–°–≤–µ—Ç–æ–¥–∏–æ–¥—ã**: RGB + –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π
- **–ü–∏—â–∞–ª–∫–∞**: –ø–∞—Å—Å–∏–≤–Ω–∞—è
- **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏**: –∫–Ω–æ–ø–∫–∞ + 4-–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º + –ø–∞—Ä–∞ 2 –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö
- **DC-DC –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å**:

1. –í—ã—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ: 3 –í.
2. –í—ã—Ö–æ–¥–Ω–æ–π —Ç–æ–∫: 1 –ê (–º–∞–∫—Å.) (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∏–∂–µ 800 –º–ê.).
3. –ó–∞—Ä—è–¥–Ω—ã–π —Ç–æ–∫: 300 (–º–∞–∫—Å.), –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å.
4. –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞ –æ—Ç —á—Ä–µ–∑–º–µ—Ä–Ω–æ–π —Ä–∞–∑—Ä—è–¥–∫–∏: 3 –í; –ø–æ–ª–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ: 4,2 –í.
5. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞—Ä—è–¥–∫–∏: 4,2 –í
6. –¢–æ–∫ –ø–æ–∫–æ—è: –æ–∫–æ–ª–æ 6 –º–∫–ê
7. –†–∞–∑–º–µ—Ä: 18x9x2,3 –º–º.

---

## üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ [`config.h`](https://github.com/NeXan87/Auto-Spray/blob/refactor/Firmware/Smart-Air-Freshener/config.h). –ù–∏–∂–µ ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.

### üîå –ü–ò–ù–´ –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞           | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
| ------------------- | -------- | ------------------------------------------------------------------------ |
| `PIN_ADD_LED`       | `A0`     | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ —Ä–∞–∑—Ä—è–¥–∞)               |
| `PIN_BATTERY_POINT` | `A1`     | –ê–Ω–∞–ª–æ–≥–æ–≤—ã–π –≤—Ö–æ–¥ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –±–∞—Ç–∞—Ä–µ–∏ (—Ç–æ—á–∫–∞ –¥–µ–ª–∏—Ç–µ–ª—è)        |
| `PIN_SW_GLOBAL_EN`  | `A2`     | –¶–∏—Ñ—Ä–æ–≤–æ–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –≤—Å–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (LOW = –≤—ã–∫–ª—é—á–µ–Ω–æ)                  |
| `PIN_BUTTON`        | `2`      | –ö–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–≥–æ —Ä–∞—Å–ø—ã–ª–µ–Ω–∏—è (–∞–∫—Ç–∏–≤–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å: GND)                        |
| `PIN_LIGHT`         | `3`      | –î–∞—Ç—á–∏–∫ —Å–≤–µ—Ç–∞: `HIGH` = —Å–≤–µ—Ç –≤–∫–ª—é—á—ë–Ω, `LOW` = –≤—ã–∫–ª—é—á–µ–Ω                    |
| `PIN_LED_R`         | `4`      | –ö—Ä–∞—Å–Ω—ã–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥ RGB-–º–æ–¥—É–ª—è                                             |
| `PIN_LED_G`         | `5`      | –ó–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥ RGB-–º–æ–¥—É–ª—è                                             |
| `PIN_LED_B`         | `6`      | –°–∏–Ω–∏–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥ RGB-–º–æ–¥—É–ª—è                                               |
| `PIN_SW_SPRAY_1`    | `7`      | –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å: –∑–∞–º—ã–∫–∞–Ω–∏–µ –Ω–∞ GND = 1 –ø—à–∏–∫                                 |
| `PIN_SW_SPRAY_2`    | `8`      | –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å: –∑–∞–º—ã–∫–∞–Ω–∏–µ –Ω–∞ GND = 2 –ø—à–∏–∫–∞; –æ–±–∞ –∑–∞–º–∫–Ω—É—Ç—ã = 3 –ø—à–∏–∫–∞        |
| `PIN_SW_MODE`       | `9`      | –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞: `LOW` = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—à–∏–∫ –ø–æ—Å–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞ |
| `PIN_BUZZER`        | `10`     | –ü–∞—Å—Å–∏–≤–Ω–∞—è –ø–∏—â–∞–ª–∫–∞ (—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `tone()`)                           |
| `PIN_MOTOR_IN1`     | `11`     | –í—Ö–æ–¥ IN1 –¥—Ä–∞–π–≤–µ—Ä–∞ MX1508 (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º)                       |
| `PIN_MOTOR_IN2`     | `12`     | –í—Ö–æ–¥ IN2 –¥—Ä–∞–π–≤–µ—Ä–∞ MX1508 (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º)                       |
| `PIN_LED_BUILTIN`   | `13`     | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –Ω–∞ –ø–ª–∞—Ç–µ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏/–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)                   |

### üîã –ö–û–ù–¢–†–û–õ–¨ –ù–ê–ü–†–Ø–ñ–ï–ù–ò–Ø –ë–ê–¢–ê–†–ï–ò (Li-ion, 4.2 –í)

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                   | –ó–Ω–∞—á–µ–Ω–∏–µ  | –û–ø–∏—Å–∞–Ω–∏–µ                                                                       |
| --------------------------- | --------- | ------------------------------------------------------------------------------ |
| `VCC_ARDUINO`               | `3000.0f` | –û–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ Arduino (–º–í), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è |
| `BATTERY_DIVIDER_RATIO`     | `1.43f`   | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–µ–ª–∏—Ç–µ–ª—è: `(R1 + R2) / R2` (–Ω–∞–ø—Ä–∏–º–µ—Ä, R1=4.7–∫, R2=10–∫ ‚Üí 1.47)      |
| `BATTERY_LOW_MV`            | `3400`    | –ü–æ—Ä–æ–≥ "–Ω–∏–∑–∫–æ–≥–æ –∑–∞—Ä—è–¥–∞" (–º–í); –ø—Ä–∏ ‚â§3.4 –í ‚Äî –º–∏–≥–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä                     |
| `BATTERY_BLOCKED_MV`        | `3200`    | –ü–æ—Ä–æ–≥ –≥–ª—É–±–æ–∫–æ–≥–æ —Ä–∞–∑—Ä—è–¥–∞; –ø—Ä–∏ ‚â§3.2 –í ‚Äî –ø–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç—ã                 |
| `BATTERY_CHECK_INTERVAL_MS` | `5000`    | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è (–º—Å)                                              |
| `BATTERY_LED_ON_MS`         | `100`     | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Å–ø—ã—à–∫–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Ä–∞–∑—Ä—è–¥–∞ (–º—Å)                                   |
| `BATTERY_LED_OFF_MS`        | `500`     | –ü–∞—É–∑–∞ –º–µ–∂–¥—É –≤—Å–ø—ã—à–∫–∞–º–∏ (–º—Å)                                                     |

### ‚è±Ô∏è –¢–ê–ô–ú–ò–ù–ì–ò –†–ê–ë–û–¢–´

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                | –ó–Ω–∞—á–µ–Ω–∏–µ                          | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                    |
| ------------------------ | --------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| `LIGHT_READY_MINUTES`    | `2`                               | –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è —Å–≤–µ—Ç–∞ –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (–º–∏–Ω)                                                                    |
| `BLOCK_MINUTES`          | `15`                              | –í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å–ª–µ –ø—à–∏–∫–∞ (–º–∏–Ω)                                                                          |
| `LIGHT_READY_MS`         | `LIGHT_READY_MINUTES * 60 * 1000` | –í—Ä–µ–º—è, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á—ë–Ω, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –≤ —Ä–µ–∂–∏–º `READY`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2 –º–∏–Ω. (–º—Å) |
| `BLOCK_MS`               | `BLOCK_MINUTES * 60 * 1000`       | –í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø—ã–ª–µ–Ω–∏—è, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15 –º–∏–Ω. (–º—Å)                                |
| `LIGHT_READ_INTERVAL_MS` | `1000`                            | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ –¥–∞—Ç—á–∏–∫–∞ —Å–≤–µ—Ç–∞ (–º—Å) ‚Äî —Å–Ω–∏–∂–∞–µ—Ç —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ                                              |

### ‚öôÔ∏è –ü–ê–†–ê–ú–ï–¢–†–´ –†–ê–°–ü–´–õ–ï–ù–ò–Ø

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞          | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                             |
| ------------------ | -------- | ---------------------------------------------------- |
| `SPRAY_ON_MS`      | `600`    | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è –º–æ—Ç–æ—Ä–∞ "–≤–ø–µ—Ä—ë–¥" –¥–ª—è –ø—à–∏–∫–∞ (–º—Å) |
| `SPRAY_PAUSE1_MS`  | `300`    | –ü–∞—É–∑–∞ –º–µ–∂–¥—É "–≤–ø–µ—Ä—ë–¥" –∏ "—Ä–µ–≤–µ—Ä—Å–æ–º" (–º—Å)               |
| `SPRAY_REVERSE_MS` | `200`    | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–≤–µ—Ä—Å–∞ (–º—Å) ‚Äî –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–∞—Ä–µ—Ç–∫–∏     |
| `SPRAY_PAUSE2_MS`  | `700`    | –ü–∞—É–∑–∞ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø—à–∏–∫–∞–º–∏ (–µ—Å–ª–∏ –∏—Ö >1) (–º—Å)     |

### üí° –ò–ù–î–ò–ö–ê–¶–ò–Ø RGB-–°–í–ï–¢–û–î–ò–û–î–û–ú

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                       | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                                   |
| ------------------------------- | -------- | ---------------------------------------------------------- |
| `LED_COMMON_ANODE`              | `false`  | –¢–∏–ø RGB-–º–æ–¥—É–ª—è: `false` = –æ–±—â–∏–π –∫–∞—Ç–æ–¥, `true` = –æ–±—â–∏–π –∞–Ω–æ–¥ |
| `STARTUP_DELAY_MS`              | `200`    | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–≤–µ—á–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —Ü–≤–µ—Ç–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (–º—Å)        |
| `LED_BLINK_ON_CONFIRM_MODE_MS`  | `100`    | –í—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ (–º—Å)   |
| `LED_BLINK_OFF_CONFIRM_MODE_MS` | `1000`   | –í—Ä–µ–º—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ (–º—Å)  |

### üí° –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ô –°–í–ï–¢–û–î–ò–û–î (A0)

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                   | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                          |
| --------------------------- | -------- | ------------------------------------------------- |
| `BLINK_ON_CONFIRM_MODE_MS`  | `100`    | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Å–ø—ã—à–∫–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—à–∏–∫–æ–≤  |
| `BLINK_OFF_CONFIRM_MODE_MS` | `200`    | –ü–∞—É–∑–∞ –º–µ–∂–¥—É –≤—Å–ø—ã—à–∫–∞–º–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—à–∏–∫–æ–≤ |

### üí° –í–°–¢–†–û–ï–ù–ù–´–ô –°–í–ï–¢–û–î–ò–û–î (D13) ‚Äî –¢–û–õ–¨–ö–û –î–õ–Ø –û–¢–õ–ê–î–ö–ò

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞              | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                          |
| ---------------------- | -------- | ------------------------------------------------- |
| `ACTIVITY_LED_ENABLED` | `true`   | –í–∫–ª—é—á–∏—Ç—å –º–∏–≥–∞–Ω–∏–µ D13 –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ |
| `ACTIVITY_LED_ON_MS`   | `100`    | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Å–ø—ã—à–∫–∏                              |
| `ACTIVITY_LED_OFF_MS`  | `2100`   | –ü–µ—Ä–∏–æ–¥: 100 –º—Å –≤–∫–ª + 2000 –º—Å –≤—ã–∫–ª                 |

### üò¥ –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–ù–û–ú

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞           | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                                          |
| ------------------- | -------- | ----------------------------------------------------------------- |
| `ENABLE_SLEEP_MODE` | `true`   | –í–∫–ª—é—á–∏—Ç—å —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∏–π —Ä–µ–∂–∏–º (`true` = –¥–∞, `false` = –æ—Ç–ª–∞–¥–∫–∞) |

### üîÑ –°–ë–†–û–° –ë–õ–û–ö–ò–†–û–í–ö–ò

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                          |
| ------------------------ | -------- | ------------------------------------------------- |
| `BLOCK_RESET_HOLD_MS`    | `2000`   | –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Å–±—Ä–æ—Å–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–º—Å) |
| `RESET_BEEP_DURATION_MS` | `200`    | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∏—Å–∫–∞ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Å–±—Ä–æ—Å–µ (–º—Å)       |

### üîä –ü–ò–©–ê–õ–ö–ê

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞       | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                                   |
| --------------- | -------- | ---------------------------------------------------------- |
| `FREQ_SQUEAKER` | `1000`   | –ß–∞—Å—Ç–æ—Ç–∞ –∑–≤—É–∫–∞ (–ì—Ü)                                         |
| `READY_BEEP_MS` | `300`    | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `READY` (–º—Å) |

### üåû –î–ê–¢–ß–ò–ö –û–°–í–ï–©–Å–ù–ù–û–°–¢–ò OPT3001 (I¬≤C)

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                 | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                                           |
| ------------------------- | -------- | ------------------------------------------------------------------ |
| `USE_OPT3001`             | `true`   | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OPT3001 –≤–º–µ—Å—Ç–æ –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–∞              |
| `OPT3001_I2C_ADDRESS`     | `0x44`   | –ê–¥—Ä–µ—Å –Ω–∞ —à–∏–Ω–µ I¬≤C (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)                                    |
| `OPT3001_LIGHT_THRESHOLD` | `100`    | –ü–æ—Ä–æ–≥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è (–≤ –ª—é–∫—Å–∞—Ö): —Å–≤–µ—Ç > 100 = –≤–∫–ª—é—á—ë–Ω                |
| `OPT3001_HYSTERESIS`      | `20`     | –ì–∏—Å—Ç–µ—Ä–µ–∑–∏—Å (–≤ –ª—é–∫—Å–∞—Ö): –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—Ä–µ–±–µ–∑–≥ –ø—Ä–∏ –ø–æ–≥—Ä–∞–Ω–∏—á–Ω–æ–º —Å–≤–µ—Ç–µ |

### üì¶ –¢–ò–ü–´ –î–ê–ù–ù–´–• (ENUM‚Äô–´)

#### `State` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

- `STATE_IDLE` ‚Äî –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `STATE_LIGHT_WAIT` ‚Äî –æ–∂–∏–¥–∞–Ω–∏–µ 2+ –º–∏–Ω—É—Ç –≤–∫–ª—é—á—ë–Ω–Ω–æ–≥–æ —Å–≤–µ—Ç–∞
- `STATE_READY` ‚Äî –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: —Å–≤–µ—Ç –≤—ã–∫–ª—é—á–µ–Ω ‚Üí –ø—à–∏–∫
- `STATE_SPRAY` ‚Äî –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞—Å–ø—ã–ª–µ–Ω–∏–µ
- `STATE_BLOCKED` ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ –ø—à–∏–∫–∞
- `STATE_RESET_BEEP` ‚Äî —Å–∏–≥–Ω–∞–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–±—Ä–æ—Å–∞

#### `LedColor` ‚Äî —Ü–≤–µ—Ç–∞ RGB-—Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞

- `LED_RED_ON` / `LED_RED_OFF`
- `LED_GREEN_ON` / `LED_GREEN_OFF`
- `LED_BLUE_ON` / `LED_BLUE_OFF`

#### `SprayStep` ‚Äî —ç—Ç–∞–ø—ã —Ä–∞—Å–ø—ã–ª–µ–Ω–∏—è

- `FORWARD` ‚Äî –≤—Ä–∞—â–µ–Ω–∏–µ –≤–ø–µ—Ä—ë–¥
- `PAUSE1` ‚Äî –ø–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Ä–µ–≤–µ—Ä—Å–æ–º
- `REVERSE` ‚Äî —Ä–µ–≤–µ—Ä—Å (–≤–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏)
- `PAUSE2` ‚Äî –ø–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –ø—à–∏–∫–æ–º
- `REPEAT` ‚Äî –ø–æ–≤—Ç–æ—Ä —Ü–∏–∫–ª–∞ (–µ—Å–ª–∏ –ø—à–∏–∫–æ–≤ >1)

---

## üîã –≠–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ

- **–ê–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º**: ~3.5 –º–ê
- **–ì–ª—É–±–æ–∫–∏–π —Å–æ–Ω**: 1 –º–ê (–Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å –º–µ–Ω—å—à–µ)
- **–ü—à–∏–∫**: ~400 –º–ê (–∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)

---

## üõ†Ô∏è –ü—Ä–æ—à–∏–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
   - `Bounce2`
   - `GyverPower`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤ IDE:
   - **–ü–ª–∞—Ç–∞**: _Arduino Pro Mini_
   - **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä**: _ATmega328P (3.3V, 8 MHz)_
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–æ–¥ —Å–µ–±—è.
4. –û—Ç–∫–ª—é—á–∏—Ç–µ –¥–≤–∏–≥–∞—Ç–µ–ª—å (–≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—à–∏–≤–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å)
5. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä.
6. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
‚îú‚îÄ‚îÄ Smart-Air-Freshener.ino // —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.h // –í–°–ï –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–¥–µ—Å—å
‚îú‚îÄ‚îÄ state.cpp // –º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
‚îú‚îÄ‚îÄ leds.cpp // —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏
‚îú‚îÄ‚îÄ opt3001.cpp // –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–∞—Ç—á–∏–∫–∞ —Å–≤–µ—Ç–∞
‚îú‚îÄ‚îÄ spray.cpp // —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–æ–º
‚îú‚îÄ‚îÄ battery.cpp // –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ sleep.cpp // —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–Ω–æ–º
‚îú‚îÄ‚îÄ utils.cpp // –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. –≤ —Ñ–∞–π–ª–µ LICENSE .
